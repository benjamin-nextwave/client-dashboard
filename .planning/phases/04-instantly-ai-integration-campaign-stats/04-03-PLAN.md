---
phase: 04-instantly-ai-integration-campaign-stats
plan: 03
type: execute
wave: 2
depends_on: ["04-01"]
files_modified:
  - package.json
  - src/app/(client)/dashboard/_components/stats-cards.tsx
  - src/app/(client)/dashboard/_components/contact-list-modal.tsx
autonomous: true

must_haves:
  truths:
    - "Stats cards component renders Reactie vereist, monthly replies, positive leads, contacts count, and emails sent"
    - "Contact list modal shows full contact list with name, company, job title, industry, status"
  artifacts:
    - path: "src/app/(client)/dashboard/_components/stats-cards.tsx"
      provides: "Client component displaying 5 stat cards with brand color accents"
      contains: "Reactie vereist"
    - path: "src/app/(client)/dashboard/_components/contact-list-modal.tsx"
      provides: "Modal component showing paginated contact list table"
      contains: "Contacten in database"
  key_links:
    - from: "src/app/(client)/dashboard/_components/stats-cards.tsx"
      to: "brand color CSS variable"
      via: "uses var(--brand-color) or bg-brand Tailwind class"
      pattern: "brand"
---

<objective>
Install Recharts and date-fns, then build the stats cards and contact list modal components.

Purpose: These are the core "at a glance" statistics that clients see on their Overzicht page -- the alert banner for unanswered leads, monthly KPIs, and access to the full contact database.

Output: Two client components ready to receive data as props from the server component page.
</objective>

<execution_context>
@C:\Users\bstei\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\bstei\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-instantly-ai-integration-campaign-stats/04-RESEARCH.md
@src/app/(client)/layout.tsx
@src/app/(client)/dashboard/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install packages</name>
  <files>package.json</files>
  <action>
Run `npm install recharts date-fns` to add both dependencies. Recharts for chart components (plans 04-04), date-fns for date math in aggregation queries. Installing both now so plan 04 doesn't need to.
  </action>
  <verify>Run `npm ls recharts date-fns` to confirm both installed.</verify>
  <done>recharts and date-fns are in package.json dependencies.</done>
</task>

<task type="auto">
  <name>Task 2: Stats cards component</name>
  <files>src/app/(client)/dashboard/_components/stats-cards.tsx</files>
  <action>
Create a "use client" component that displays the dashboard stat cards. It receives all data as props (no data fetching inside).

**Props interface:**
```typescript
interface StatsCardsProps {
  unansweredPositive: number  // "Reactie vereist" count
  totalReplies: number        // "Totaal aantal reacties deze maand"
  positiveLeads: number       // "Geleverde leads deze maand"
  contactCount: number        // "Contacten in database"
  emailsSent: number          // "Verzonden mails"
  onOpenContactList: () => void  // trigger to open contact list modal
}
```

**Layout:**
1. **Alert banner** (only shown if unansweredPositive > 0): Full-width banner at the top with brand-color background, white text, exclamation icon. Text: "{count} reactie(s) vereist" with a link-style "Bekijk in inbox" text (links to /dashboard/inbox).
2. **Four stat cards** in a 2x2 grid on desktop (grid-cols-2 lg:grid-cols-4), stacking on mobile:
   - "Totaal aantal reacties" with totalReplies value, subtitle "deze maand"
   - "Geleverde leads" with positiveLeads value, subtitle "deze maand"
   - "Contacten in database" with contactCount value, plus a small button "Bekijk lijst" that calls onOpenContactList
   - "Verzonden mails" with emailsSent value, subtitle "deze maand"

**Styling:** Cards use white bg, rounded-lg, shadow-sm, p-6. Values are text-3xl font-bold. Labels are text-sm text-gray-500. The "Contacten in database" card's "Bekijk lijst" button uses brand color (text-brand or via CSS variable). Use Tailwind classes consistent with existing dashboard styling.

Do NOT import Recharts here -- this component is pure stat display with no charts.
  </action>
  <verify>Run `npx tsc --noEmit`. Check component is "use client" and exports StatsCards.</verify>
  <done>StatsCards component renders alert banner (conditional) and 4 stat cards with Dutch labels, brand color accents, and contact list trigger.</done>
</task>

<task type="auto">
  <name>Task 3: Contact list modal component</name>
  <files>src/app/(client)/dashboard/_components/contact-list-modal.tsx</files>
  <action>
Create a "use client" modal component for STAT-04 "Contacten in database" that shows the full contact list.

**Props interface:**
```typescript
interface Contact {
  email: string
  first_name: string | null
  last_name: string | null
  company_name: string | null
  job_title: string | null
  industry: string | null
  lead_status: string | null
  interest_status: string | null
}

interface ContactListModalProps {
  contacts: Contact[]
  isOpen: boolean
  onClose: () => void
}
```

**Layout:**
- Backdrop overlay (fixed inset-0, bg-black/50, z-50) with click-to-close
- Modal panel: max-w-4xl, max-h-[80vh], white bg, rounded-xl, shadow-2xl
- Header: "Contacten in database" title + close button (X icon, inline SVG per project convention)
- Scrollable table body with columns: Naam (first_name + last_name), Bedrijf, Functie, Sector, Status
- Status column shows Dutch-labeled badge: "Gemaild" (blue), "Beantwoord" (green), "Gebounced" (red), "Nog niet gemaild" (gray), interest_status "positive" gets a small green dot indicator
- If contacts array is empty, show "Geen contacten gevonden." message
- Client-side search filter at the top: filters by name, company, or email (simple includes match on the already-loaded contacts array)
- Show total count: "{N} contacten" below the search bar

**Accessibility:** Modal traps focus, ESC key closes, aria-modal="true", role="dialog".

Do NOT use any external modal library -- build with plain HTML/Tailwind, keeping with the project's zero-extra-dependencies philosophy (inline SVG icons, no icon library).
  </action>
  <verify>Run `npx tsc --noEmit`. Check component is "use client" and exports ContactListModal.</verify>
  <done>ContactListModal renders a table of contacts with search filter, Dutch status labels, colored badges, proper accessibility, and close behavior.</done>
</task>

</tasks>

<verification>
- Both components compile without errors
- Both are "use client" components
- All Dutch labels match requirements (Reactie vereist, Totaal aantal reacties, Geleverde leads, Contacten in database, Verzonden mails)
- No data fetching inside components (props only)
</verification>

<success_criteria>
Stats cards and contact list modal are ready to be composed into the Overzicht page. Both components accept data as props and render with Dutch labels and brand color theming.
</success_criteria>

<output>
After completion, create `.planning/phases/04-instantly-ai-integration-campaign-stats/04-03-SUMMARY.md`
</output>
